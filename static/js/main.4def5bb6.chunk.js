(this["webpackJsonp03-tetris"]=this["webpackJsonp03-tetris"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t),r.d(t,"store",(function(){return $}));var n=r(0),a=r.n(n),c=r(4),s=r.n(c),o=(r(14),r.p,r(15),r(16),r(17),r(18),{1:"yellow",2:"lightBlue",3:"darkBlue",4:"orange",5:"red",6:"green",7:"purple",11:"yellow",12:"lightBlue",13:"darkBlue",14:"orange",15:"red",16:"green",17:"purple"}),i=r(2),u=r(1);var l=function(e){var t=Object(i.c)((function(e){return e.playArea})),r=Object(i.c)((function(e){return e.brick})),n=r.brick,a=r.baseLine,c=r.baseColumn,s=n.length;return Object(u.jsx)("div",{className:"PlayArea",children:function(){for(var e=[],r=function(){for(var e=[],r=0;r<24;r++)if(r<=a-s||r>a)e=e.concat(t[r]);else for(var o=0;o<10;o++)e=o<c||o>=c+s?e.concat(t[r][o]):e.concat(n[r-a+s-1][o-c]+t[r][o]);return e}(),i=40;i<240;i++)0===r[i]?e.push(Object(u.jsx)("div",{className:"PlayArea__cell"},"".concat(i))):e.push(Object(u.jsx)("div",{className:"PlayArea__cell_".concat(o[r[i]])},"".concat(i)));return e}()})},d=(r(26),r.p+"static/media/start.0d813cbe.svg"),b=r.p+"static/media/pause.b545dedf.svg";var f=function(e){var t=Object(i.c)((function(e){return e.gameStatus})),r="inProgress"===t?"button button_unactive":"button button_active",n="inProgress"===t?null:e.startGame,a="inProgress"===t?"button button_active":"button button_unactive",c="inProgress"===t?e.stopGame:null;return Object(u.jsxs)("div",{className:"Controls",children:[Object(u.jsx)("button",{className:r,onClick:n,children:Object(u.jsx)("img",{src:d})}),Object(u.jsx)("button",{className:a,onClick:c,children:Object(u.jsx)("img",{src:b})})]})};r(27);var p=function(){var e=Object(i.c)((function(e){return e.score.score})),t=Object(i.c)((function(e){return e.score.record})),r=Object(i.c)((function(e){return e.level.level}));return Object(u.jsxs)("div",{className:"Stat",children:[Object(u.jsx)("p",{className:"Stat__title",children:"SCORE:"}),Object(u.jsx)("p",{className:"Stat__score",children:e}),Object(u.jsx)("p",{className:"Stat__title",children:"BEST:"}),Object(u.jsx)("p",{className:"Stat__score",children:t}),Object(u.jsx)("p",{className:"Stat__title",children:"SPEED:"}),Object(u.jsx)("p",{className:"Stat__score",children:r})]})};r(28);var v=function(){var e=Object(i.c)((function(e){return e.nextBrick.brick}));return Object(u.jsxs)("div",{className:"Queue",children:[Object(u.jsx)("p",{className:"Queue__title",children:"NEXT:"}),Object(u.jsx)("div",{className:"Queue__item",children:function(){for(var t=[],r=function(){for(var t=[],r=0;r<4;r++)for(var n=0;n<4;n++)e[r]&&e[r][n]?t.push(e[r][n]):t.push(0);return t}(),n=0;n<16;n++)0===r[n]||void 0===r[n]?t.push(Object(u.jsx)("div",{className:"Queue__cell"},"".concat(n))):t.push(Object(u.jsx)("div",{className:"Queue__cell_".concat(o[r[n]])},"".concat(n)));return t}()})]})},h={0:[[1,1],[1,1]],1:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,2,2,2]],2:[[0,3,0],[0,3,0],[3,3,0]],3:[[4,0,0],[4,0,0],[4,4,0]],4:[[0,0,0],[5,5,0],[0,5,5]],5:[[0,0,0],[0,6,6],[6,6,0]],6:[[0,0,0],[7,7,7],[0,7,0]]};function j(e){var t=Math.random()*(e+1);return Math.floor(t)}function m(e){for(var t=e.length,r=[],n=0;n<t;n++){for(var a=[],c=0;c<t;c++)a.push(e[t-c-1][n]);a.every((function(e){return 0===e}))?r.unshift(a):r.push(a)}return r}function g(){for(var e=h[j(6)],t=0;t<j(3);t++)e=m(e);var r=e.length;return{brick:e,baseLine:3,baseColumn:Math.ceil((10-r)/2)}}var y="ADD_NEW_BRICK",O="ADD_NEW_BRICK_FROM_NEXT",_="REMOVE_BRICK",S="MOVE_DOWN",k="MOVE_LEFT",E="MOVE_RIGHT",N="ROTATE",x="GENERATE_NEXT_BRICK",C="MOUNT_BRICK",A="REMOVE_FULL_ROWS",w="CLEAR_AREA",L="UPDATE_SCORE",R="CLEAR_SCORE",M="GAME_START",I="GAME_PAUSE",T="GAME_FINISH",B="COUNT_ROWS",P="CLEAR_LEVEL",D=function(){return{type:y,payload:g()}};function G(e,t,r,n,a){var c=r.length;if("down"===e&&n>=24)return!1;if("left"===e&&a<0)for(var s=0;s<c;s++)for(var o=0;o<-1*a;o++)if([1,2,3,4,5,6,7].includes(r[s][o]))return!1;if("right"===e&&a+c>10)for(var i=0;i<c;i++)for(var u=c-1;u>9-a;u--)if([1,2,3,4,5,6,7].includes(r[i][u]))return!1;for(var l=0;l<c;l++)for(var d=0;d<c;d++)if([1,2,3,4,5,6,7].includes(r[l][d])&&[11,12,13,14,15,16,17].includes(t[l+n-c+1][d+a]))return!1;return!0}var K=function(){return{type:x,payload:g()}};function U(){var e=$.getState().playArea,t=$.getState().brick,r=$.getState().nextBrick,n=$.getState().score.score,a=$.getState().score.record,c=$.getState().level,s=e.filter((function(e){return e.every((function(e){return e>10}))})).length;if(!e.slice(0,4).some((function(e){return e.some((function(e){return 0!==e}))})))return 0===t.brick.length?($.dispatch(D()),void $.dispatch(K())):void(s>0?($.dispatch(function(e,t){var r=e.filter((function(e){return e.some((function(e){return e<=10}))}));return r=new Array(t).fill([0,0,0,0,0,0,0,0,0,0]).concat(r),{type:A,payload:r}}(e,s)),$.dispatch(function(e,t,r){var n=t+[0,5,10,20,40][e],a=r;return n>r&&(a=n,localStorage.setItem("record",a)),{type:L,payload:{score:n,record:a}}}(s,n,a)),$.dispatch(function(e,t){var r=t.rows,n=t.level<10?1+Math.floor((r+e)/15):t.level,a=n!==t.level?800-Math.floor(650*Math.sin(Math.PI/2-Math.PI/18*(10-n))):t.speed;return{type:B,payload:{rows:r+e,level:n,speed:a}}}(s,c))):G("down",e,t.brick,t.baseLine+1,t.baseColumn)?$.dispatch(function(){var e=$.getState().brick;return{type:S,payload:{brick:e.brick,baseLine:e.baseLine+1,baseColumn:e.baseColumn}}}()):($.dispatch(function(e,t){for(var r=t.brick,n=t.baseLine,a=t.baseColumn,c=r.length,s=[],o=0;o<24;o++)if(o<=n-c||o>n)s.push(e[o]);else{for(var i=[],u=0;u<10;u++)u<a||u>=a+c?i.push(e[o][u]):[1,2,3,4,5,6,7].includes(r[o-n+c-1][u-a])?i.push(r[o-n+c-1][u-a]+10):i.push(e[o][u]);s.push(i)}return{type:C,payload:s}}(e,t)),0===r.brick.length?($.dispatch(D()),$.dispatch(K())):($.dispatch(function(e){return{type:O,payload:e}}(r)),$.dispatch(K()))));$.dispatch({type:T})}function V(){var e=$.getState().gameStatus;if("paused"!==e){var t=$.getState().level.speed;U(),"inProgress"===e&&setTimeout(V,t)}}var W=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.gameStatus})),r=Object(n.useCallback)((function(t){"Numpad5"===t.code||"ArrowDown"===t.code||"KeyS"===t.code?(t.preventDefault(),U()):"Numpad4"===t.code||"ArrowLeft"===t.code||"KeyA"===t.code?(t.preventDefault(),e(function(){var e=$.getState().brick,t=G("left",$.getState().playArea,e.brick,e.baseLine,e.baseColumn-1)?-1:0;return{type:k,payload:{brick:e.brick,baseLine:e.baseLine,baseColumn:e.baseColumn+t}}}())):"Numpad6"===t.code||"ArrowRight"===t.code||"KeyD"===t.code?(t.preventDefault(),e(function(){var e=$.getState().brick,t=G("right",$.getState().playArea,e.brick,e.baseLine,e.baseColumn+1)?1:0;return{type:E,payload:{brick:e.brick,baseLine:e.baseLine,baseColumn:e.baseColumn+t}}}())):"Numpad8"!==t.code&&"ArrowUp"!==t.code&&"KeyW"!==t.code||(t.preventDefault(),e(function(){for(var e=$.getState().brick,t=e.brick,r=e.baseColumn,n=t.length,a=r<0?0:r>10-n?10-n:r,c=[],s=0;s<n;s++){for(var o=[],i=0;i<n;i++)o.push(t[n-i-1][s]);o.every((function(e){return 0===e}))?c.unshift(o):c.push(o)}return{type:N,payload:{brick:c,baseLine:e.baseLine,baseColumn:a}}}()))}),[]);return Object(u.jsxs)("main",{className:"Main",children:[Object(u.jsx)(l,{}),Object(u.jsxs)("div",{className:"Main__controls-panel",children:[Object(u.jsx)(p,{}),Object(u.jsx)(f,{startGame:function(){window.addEventListener("keydown",r),"paused"===t?e({type:M}):"finished"===t&&(e({type:w}),e({type:R}),e({type:P}),e({type:M})),V()},stopGame:function(){window.removeEventListener("keydown",r),e({type:I})}}),Object(u.jsx)(v,{})]})]})};var Q=function(){return localStorage.getItem("record")||localStorage.setItem("record",0),Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(W,{})})},F=r(3),X={brick:[],baseLine:0,baseColumn:0},H="paused",J={rows:0,level:1,speed:800},q={brick:[],baseLine:0,baseColumn:0},z=new Array(24).fill([0,0,0,0,0,0,0,0,0,0]),Y={score:0,record:localStorage.getItem("record")?localStorage.getItem("record"):0},Z=Object(F.b)({playArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return t.payload;case w:return z;case A:return t.payload;default:return e}},brick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:case O:return t.payload;case _:return X;case S:case k:case E:case N:return t.payload;default:return e}},nextBrick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload;default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return t.payload;case R:return Y;default:return e}},gameStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return"inProgress";case I:return"paused";case T:return"finished";default:return e}},level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return t.payload;case P:return J;default:return e}}}),$=Object(F.c)(Z);s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(i.a,{store:$,children:Object(u.jsx)(Q,{})})}),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.4def5bb6.chunk.js.map