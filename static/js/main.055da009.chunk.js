(this["webpackJsonp03-tetris"]=this["webpackJsonp03-tetris"]||[]).push([[0],[,,,,,,,,,,,,,function(e,n,r){},function(e,n,r){},function(e,n,r){},function(e,n,r){},function(e,n,r){},,function(e,n,r){},function(e,n,r){},function(e,n,r){},function(e,n,r){"use strict";r.r(n);var t=r(1),c=r.n(t),o=r(8),a=r.n(o),i=(r(13),r.p,r(14),r(6)),s=(r(15),r(16),r(17),{1:"yellow",2:"lightBlue",3:"darkBlue",4:"orange",5:"red",6:"green",7:"purple",11:"yellow",12:"lightBlue",13:"darkBlue",14:"orange",15:"red",16:"green",17:"purple"}),u=r(0);var l=function(e){var n=e.gameData.playField,r=e.gameData.movingBrick,t=e.gameData.baseLine,c=e.gameData.baseColumn,o=e.gameData.movingBrick.length;return Object(u.jsx)("div",{className:"PlayArea",children:function(){for(var e=[],a=function(){for(var e=[],a=0;a<24;a++)if(a<=t-o||a>t)e=e.concat(n[a]);else for(var i=0;i<10;i++)e=i<c||i>=c+o?e.concat(n[a][i]):e.concat(r[a-t+o-1][i-c]+n[a][i]);return e}(),i=40;i<240;i++)0===a[i]?e.push(Object(u.jsx)("div",{className:"PlayArea__cell"},"".concat(i))):e.push(Object(u.jsx)("div",{className:"PlayArea__cell_".concat(s[a[i]])},"".concat(i)));return e}()})};var m=r(2),v=r(3),b=r(5),d=r(4);function f(e,n,r,t,c){for(var o=0;o<c;o++)for(var a=0;a<c;a++)if([1,2,3,4,5,6,7].includes(n[o][a])&&[11,12,13,14,15,16,17].includes(e[o+r-c+1][a+t]))return!1;return!0}var k={0:[[1,1],[1,1]],1:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,2,2,2]],2:[[0,3,0],[0,3,0],[3,3,0]],3:[[4,0,0],[4,0,0],[4,4,0]],4:[[0,0,0],[5,5,0],[0,5,5]],5:[[0,0,0],[0,6,6],[6,6,0]],6:[[0,0,0],[7,7,7],[0,7,0]]};function p(e){var n=Math.random()*(e+1);return Math.floor(n)}function j(e){for(var n=e.length,r=[],t=0;t<n;t++){for(var c=[],o=0;o<n;o++)c.push(e[n-o-1][t]);c.every((function(e){return 0===e}))?r.unshift(c):r.push(c)}return r}function h(){for(var e=k[p(6)],n=0;n<p(3);n++)e=j(e);var r=e.length;return{brick:e,baseColumn:Math.ceil((10-r)/2)}}var g=function(e){Object(b.a)(r,e);var n=Object(d.a)(r);function r(){return Object(m.a)(this,r),n.apply(this,arguments)}return Object(v.a)(r,[{key:"stopBlock",value:function(e){for(var n=e.playField,r=e.movingBrick,t=e.baseLine,c=e.baseColumn,o=e.movingBrick.length,a=[],i=0;i<24;i++)if(i<=t-o||i>t)a.push(n[i]);else{for(var s=[],u=0;u<10;u++)u<c||u>=c+o?s.push(n[i][u]):[1,2,3,4,5,6,7].includes(r[i-t+o-1][u-c])?s.push(r[i-t+o-1][u-c]+10):s.push(n[i][u]);a.push(s)}var l=e.score+1,m=e.record;return l>e.record&&(m=l,localStorage.setItem("record",m)),{playField:a,movingBrick:[],baseLine:3,baseColumn:3,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:l,record:m,bricksCount:e.bricksCount+1}}},{key:"move",value:function(e){var n=e.playField,r=e.movingBrick,t=e.baseLine+1,c=e.baseColumn,o=e.movingBrick.length;return 0===r.length?e:t>23||!1===f(n,r,t,c,o)?this.stopBlock(e):{playField:n,movingBrick:r,baseLine:t,baseColumn:c,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}}]),r}(c.a.Component),B=function(e){Object(b.a)(r,e);var n=Object(d.a)(r);function r(){return Object(m.a)(this,r),n.apply(this,arguments)}return Object(v.a)(r,[{key:"doNotMove",value:function(e){return e}},{key:"move",value:function(e){var n=e.playField,r=e.movingBrick,t=e.baseLine,c=e.baseColumn+1,o=e.movingBrick.length;if(c+o>10)for(var a=0;a<o;a++)for(var i=o-1;i>9-c;i--)if([1,2,3,4,5,6,7].includes(r[a][i]))return this.doNotMove(e);return!1===f(n,r,t,c,o)?this.doNotMove(e):{playField:n,movingBrick:r,baseLine:t,baseColumn:c,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}}]),r}(c.a.Component),C=function(e){Object(b.a)(r,e);var n=Object(d.a)(r);function r(){return Object(m.a)(this,r),n.apply(this,arguments)}return Object(v.a)(r,[{key:"doNotMove",value:function(e){return e}},{key:"move",value:function(e){var n=e.playField,r=e.movingBrick,t=e.baseLine,c=e.baseColumn-1,o=e.movingBrick.length;if(c<0)for(var a=0;a<o;a++)for(var i=0;i<-1*c;i++)if([1,2,3,4,5,6,7].includes(r[a][i]))return this.doNotMove(e);return!1===f(n,r,t,c,o)?this.doNotMove(e):{playField:n,movingBrick:r,baseLine:t,baseColumn:c,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}}]),r}(c.a.Component),x=(r(19),r.p+"static/media/start.0d813cbe.svg"),O=r.p+"static/media/pause.b545dedf.svg";var y=function(e){return Object(u.jsxs)("div",{className:"Controls",children:[Object(u.jsx)("button",{className:"button",onClick:e.startGame,children:Object(u.jsx)("img",{src:x})}),Object(u.jsx)("button",{className:"button",onClick:e.stopGame,children:Object(u.jsx)("img",{src:O})})]})};r(20);var N=function(e){return Object(u.jsxs)("div",{className:"Stat",children:[Object(u.jsx)("p",{className:"Stat__title",children:"SCORE:"}),Object(u.jsx)("p",{className:"Stat__score",children:e.score}),Object(u.jsx)("p",{className:"Stat__title",children:"BEST:"}),Object(u.jsx)("p",{className:"Stat__score",children:e.record})]})};r(21);var F=function(e){var n=e.gameData.nextBrick;return Object(u.jsxs)("div",{className:"Queue",children:[Object(u.jsx)("p",{className:"Queue__title",children:"NEXT:"}),Object(u.jsx)("div",{className:"Queue__item",children:function(){for(var e=[],r=function(){for(var e=[],r=0;r<4;r++)for(var t=0;t<4;t++)n[r]&&n[r][t]?e.push(n[r][t]):e.push(0);return e}(),t=0;t<16;t++)0===r[t]||void 0===r[t]?e.push(Object(u.jsx)("div",{className:"Queue__cell"},"".concat(t))):e.push(Object(u.jsx)("div",{className:"Queue__cell_".concat(s[r[t]])},"".concat(t)));return e}()})]})};var _=[0,5,10,20,40];var L=new g;function S(e,n,r){return function(e){for(var n=0;n<4;n++)if(e[n].some((function(e){return 0!==e})))return!0;return!1}(e.playField)?(console.log("youlose"),n(),e):e.playField.some((function(e){return e.every((function(e){return[11,12,13,14,15,16,17].includes(e)}))}))?function(e){for(var n=e.playField,r=e.movingBrick,t=e.baseLine,c=e.baseColumn,o=0,a=[],i=0;i<24;i++)n[i].every((function(e){return e>10}))?o+=1:a.push(n[i]);for(var s=0;s<o;s++)a.unshift([0,0,0,0,0,0,0,0,0,0]);var u=e.score+_[o],l=e.record;return u>e.record&&(l=u,localStorage.setItem("record",l)),{playField:a,movingBrick:r,baseLine:t,baseColumn:c,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:u,record:l,bricksCount:e.bricksCount}}(e):0===e.movingBrick.length?function(e){if(0===e.nextBrick.length){var n=h(),r=h();return{playField:e.playField,movingBrick:n.brick,baseLine:3,baseColumn:n.baseColumn,nextBrick:r.brick,nextBaseColumn:r.baseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}var t=h();return{playField:e.playField,movingBrick:e.nextBrick,baseLine:3,baseColumn:e.nextBaseColumn,nextBrick:t.brick,nextBaseColumn:t.baseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}(e):L.move(e)}var w=function(e){Object(b.a)(r,e);var n=Object(d.a)(r);function r(){return Object(m.a)(this,r),n.apply(this,arguments)}return Object(v.a)(r,[{key:"move",value:function(e){var n=e.playField,r=e.movingBrick,t=e.baseLine,c=e.baseColumn,o=e.movingBrick.length,a=c;c<0?a=0:c>10-o&&(a=10-o);for(var i=[],s=0;s<o;s++){for(var u=[],l=0;l<o;l++)u.push(r[o-l-1][s]);u.every((function(e){return 0===e}))?i.unshift(u):i.push(u)}return!1===f(n,i,t,c,o)?e:{playField:n,movingBrick:i,baseLine:t,baseColumn:a,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}}]),r}(c.a.Component),M=new g,D=new B,I=new C,E=new w;var P=function(){var e=Object(t.useState)({playField:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],movingBrick:[],baseLine:3,baseColumn:3,nextBrick:[],nextBaseColumn:3,score:0,record:localStorage.getItem("record"),bricksCount:0}),n=Object(i.a)(e,2),r=n[0],c=n[1],o=Object(t.useState)(),a=Object(i.a)(o,2),s=a[0],m=a[1],v=Object(t.useState)("stopped"),b=Object(i.a)(v,2),d=b[0];function f(){c((function(e){return S(e,k)}))}function k(){window.removeEventListener("keydown",p),clearInterval(s)}b[1];var p=Object(t.useCallback)((function(e){"Numpad5"===e.code?c((function(e){return M.move(e)})):"Numpad4"===e.code?c((function(e){return I.move(e)})):"Numpad6"===e.code?c((function(e){return D.move(e)})):"Numpad8"===e.code&&c((function(e){return E.move(e)}))}),[]);return Object(u.jsxs)("main",{className:"Main",children:[Object(u.jsx)(l,{gameData:r}),Object(u.jsx)(N,{score:r.score,record:r.record}),Object(u.jsx)(y,{startGame:function(){window.addEventListener("keydown",p),m(setInterval(f,1e3))},stopGame:k,status:d}),Object(u.jsx)(F,{gameData:r})]})};var Q=function(){return localStorage.getItem("record")||localStorage.setItem("record",0),Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(P,{})})},A=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,23)).then((function(n){var r=n.getCLS,t=n.getFID,c=n.getFCP,o=n.getLCP,a=n.getTTFB;r(e),t(e),c(e),o(e),a(e)}))};a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(Q,{})}),document.getElementById("root")),A()}],[[22,1,2]]]);
//# sourceMappingURL=main.055da009.chunk.js.map