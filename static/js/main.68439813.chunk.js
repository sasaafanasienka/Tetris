(this["webpackJsonp03-tetris"]=this["webpackJsonp03-tetris"]||[]).push([[0],[,,,,,,,,,,,,,function(e,n,r){},function(e,n,r){},function(e,n,r){},function(e,n,r){},function(e,n,r){},,function(e,n,r){},function(e,n,r){},function(e,n,r){},function(e,n,r){"use strict";r.r(n);var t=r(1),o=r.n(t),c=r(8),a=r.n(c),i=(r(13),r.p,r(14),r(6)),s=(r(15),r(16),r(17),r(0));var u=function(e){var n=e.gameData.playField,r=e.gameData.movingBrick,t=e.gameData.baseLine,o=e.gameData.baseColumn,c=e.gameData.movingBrick.length;return Object(s.jsx)("div",{className:"PlayArea",children:function(){for(var e=[],a=function(){for(var e=[],a=0;a<24;a++)if(a<=t-c||a>t)e=e.concat(n[a]);else for(var i=0;i<10;i++)e=i<o||i>=o+c?e.concat(n[a][i]):e.concat(r[a-t+c-1][i-o]+n[a][i]);return e}(),i=40;i<240;i++)0===a[i]?e.push(Object(s.jsx)("div",{className:"PlayArea__cell"},"".concat(i))):e.push(Object(s.jsx)("div",{className:"PlayArea__cell_full"},"".concat(i)));return e}()})};var l=r(2),m=r(3),v=r(5),b=r(4);function d(e,n,r,t,o){for(var c=0;c<o;c++)for(var a=0;a<o;a++)if(1===n[c][a]&&2===e[c+r-o+1][a+t])return!1;return!0}var f={0:[[1,1],[1,1]],1:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,1,1,1]],2:[[0,1,0],[0,1,0],[1,1,0]],3:[[1,0,0],[1,0,0],[1,1,0]],4:[[0,0,0],[1,1,0],[0,1,1]],5:[[0,0,0],[0,1,1],[1,1,0]],6:[[0,0,0],[1,1,1],[0,1,0]]};function j(e){var n=Math.random()*(e+1);return Math.floor(n)}function k(e){for(var n=e.length,r=[],t=0;t<n;t++){for(var o=[],c=0;c<n;c++)o.push(e[n-c-1][t]);o.every((function(e){return 0===e}))?r.unshift(o):r.push(o)}return r}function p(){for(var e=f[j(6)],n=0;n<j(3);n++)e=k(e);var r=e.length;return{brick:e,baseColumn:Math.ceil((10-r)/2)}}var h=function(e){Object(v.a)(r,e);var n=Object(b.a)(r);function r(){return Object(l.a)(this,r),n.apply(this,arguments)}return Object(m.a)(r,[{key:"stopBlock",value:function(e){for(var n=e.playField,r=e.movingBrick,t=e.baseLine,o=e.baseColumn,c=e.movingBrick.length,a=[],i=0;i<24;i++)if(i<=t-c||i>t)a.push(n[i]);else{for(var s=[],u=0;u<10;u++)u<o||u>=o+c?s.push(n[i][u]):1===r[i-t+c-1][u-o]?s.push(2):s.push(n[i][u]);a.push(s)}var l=e.score+1,m=e.record;return l>e.record&&(m=l,localStorage.setItem("record",m)),{playField:a,movingBrick:[],baseLine:3,baseColumn:3,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:l,record:m,bricksCount:e.bricksCount+1}}},{key:"move",value:function(e){var n=e.playField,r=e.movingBrick,t=e.baseLine+1,o=e.baseColumn,c=e.movingBrick.length;return 0===r.length?e:t>23||!1===d(n,r,t,o,c)?this.stopBlock(e):{playField:n,movingBrick:r,baseLine:t,baseColumn:o,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}}]),r}(o.a.Component),C=function(e){Object(v.a)(r,e);var n=Object(b.a)(r);function r(){return Object(l.a)(this,r),n.apply(this,arguments)}return Object(m.a)(r,[{key:"doNotMove",value:function(e){return e}},{key:"move",value:function(e){var n=e.playField,r=e.movingBrick,t=e.baseLine,o=e.baseColumn+1,c=e.movingBrick.length;if(o+c>10)for(var a=0;a<c;a++)for(var i=c-1;i>9-o;i--)if(1===r[a][i])return this.doNotMove(e);return!1===d(n,r,t,o,c)?this.doNotMove(e):{playField:n,movingBrick:r,baseLine:t,baseColumn:o,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}}]),r}(o.a.Component),x=function(e){Object(v.a)(r,e);var n=Object(b.a)(r);function r(){return Object(l.a)(this,r),n.apply(this,arguments)}return Object(m.a)(r,[{key:"doNotMove",value:function(e){return e}},{key:"move",value:function(e){var n=e.playField,r=e.movingBrick,t=e.baseLine,o=e.baseColumn-1,c=e.movingBrick.length;if(o<0)for(var a=0;a<c;a++)for(var i=0;i<-1*o;i++)if(1===r[a][i])return this.doNotMove(e);return!1===d(n,r,t,o,c)?this.doNotMove(e):{playField:n,movingBrick:r,baseLine:t,baseColumn:o,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}}]),r}(o.a.Component);r(19);var B=function(e){return Object(s.jsxs)("div",{className:"Controls",children:[Object(s.jsx)("button",{className:"button",onClick:e.startGame,children:"START"}),Object(s.jsx)("button",{className:"button",onClick:e.stopGame,children:"PAUSE"})]})};r(20);var g=function(e){return Object(s.jsxs)("div",{className:"Stat",children:[Object(s.jsx)("p",{className:"Stat__title",children:"SCORE:"}),Object(s.jsx)("p",{className:"Stat__score",children:e.score}),Object(s.jsx)("p",{className:"Stat__title",children:"BEST:"}),Object(s.jsx)("p",{className:"Stat__score",children:e.record}),Object(s.jsx)("p",{className:"Stat__title",children:"SPEED:"}),Object(s.jsx)("p",{className:"Stat__score",children:e.speed})]})};r(21);var O=function(e){var n=e.gameData.nextBrick;return Object(s.jsxs)("div",{className:"Queue",children:[Object(s.jsx)("p",{className:"Queue__title",children:"NEXT:"}),Object(s.jsx)("div",{className:"Queue__item",children:function(){for(var e=[],r=function(){for(var e=[],r=0;r<4;r++)for(var t=0;t<4;t++)n[r]&&n[r][t]?e.push(n[r][t]):e.push(0);return e}(),t=0;t<16;t++)0===r[t]||void 0===r[t]?e.push(Object(s.jsx)("div",{className:"Queue__cell"},"".concat(t))):e.push(Object(s.jsx)("div",{className:"Queue__cell_full"},"".concat(t)));return e}()})]})};var y=[0,5,10,20,40];var N=new h;function _(e,n,r){return function(e){for(var n=0;n<4;n++)if(e[n].some((function(e){return 0!==e})))return!0;return!1}(e.playField)?(console.log("youlose"),n(),e):e.playField.some((function(e){return e.every((function(e){return 2===e}))}))?function(e){for(var n=e.playField,r=e.movingBrick,t=e.baseLine,o=e.baseColumn,c=0,a=[],i=0;i<24;i++)n[i].some((function(e){return 2!==e}))?a.push(n[i]):c+=1;for(var s=0;s<c;s++)a.unshift([0,0,0,0,0,0,0,0,0,0]);var u=e.score+y[c],l=e.record;return u>e.record&&(l=u,localStorage.setItem("record",l)),{playField:a,movingBrick:r,baseLine:t,baseColumn:o,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:u,record:l,bricksCount:e.bricksCount}}(e):0===e.movingBrick.length?function(e){if(0===e.nextBrick.length){var n=p(),r=p();return{playField:e.playField,movingBrick:n.brick,baseLine:3,baseColumn:n.baseColumn,nextBrick:r.brick,nextBaseColumn:r.baseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}var t=p();return{playField:e.playField,movingBrick:e.nextBrick,baseLine:3,baseColumn:e.nextBaseColumn,nextBrick:t.brick,nextBaseColumn:t.baseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}(e):N.move(e)}var F=function(e){Object(v.a)(r,e);var n=Object(b.a)(r);function r(){return Object(l.a)(this,r),n.apply(this,arguments)}return Object(m.a)(r,[{key:"move",value:function(e){var n=e.playField,r=e.movingBrick,t=e.baseLine,o=e.baseColumn,c=e.movingBrick.length,a=o;o<0?a=0:o>10-c&&(a=10-c);for(var i=[],s=0;s<c;s++){for(var u=[],l=0;l<c;l++)u.push(r[c-l-1][s]);u.every((function(e){return 0===e}))?i.unshift(u):i.push(u)}return!1===d(n,i,t,o,c)?e:{playField:n,movingBrick:i,baseLine:t,baseColumn:a,nextBrick:e.nextBrick,nextBaseColumn:e.nextBaseColumn,score:e.score,record:e.record,bricksCount:e.bricksCount}}}]),r}(o.a.Component),S=new h,L=new C,w=new x,M=new F;var D=function(){var e=Object(t.useState)({playField:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],movingBrick:[],baseLine:3,baseColumn:3,nextBrick:[],nextBaseColumn:3,score:0,record:localStorage.getItem("record"),bricksCount:0}),n=Object(i.a)(e,2),r=n[0],o=n[1],c=Object(t.useState)(),a=Object(i.a)(c,2),l=a[0],m=a[1],v=Object(t.useState)("stopped"),b=Object(i.a)(v,2),d=b[0];function f(){o((function(e){return _(e,j)}))}function j(){window.removeEventListener("keydown",k),clearInterval(l)}b[1];var k=Object(t.useCallback)((function(e){"Numpad5"===e.code?o((function(e){return S.move(e)})):"Numpad4"===e.code?o((function(e){return w.move(e)})):"Numpad6"===e.code?o((function(e){return L.move(e)})):"Numpad8"===e.code&&o((function(e){return M.move(e)}))}),[]);return Object(s.jsxs)("main",{className:"Main",children:[Object(s.jsx)(g,{score:r.score,record:r.record}),Object(s.jsx)(u,{gameData:r}),Object(s.jsxs)("div",{children:[Object(s.jsx)(B,{startGame:function(){window.addEventListener("keydown",k),m(setInterval(f,1e3))},stopGame:j,status:d}),Object(s.jsx)(O,{gameData:r})]})]})};var E=function(){return localStorage.getItem("record")||localStorage.setItem("record",0),Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(D,{})})},I=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,23)).then((function(n){var r=n.getCLS,t=n.getFID,o=n.getFCP,c=n.getLCP,a=n.getTTFB;r(e),t(e),o(e),c(e),a(e)}))};a.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(E,{})}),document.getElementById("root")),I()}],[[22,1,2]]]);
//# sourceMappingURL=main.68439813.chunk.js.map