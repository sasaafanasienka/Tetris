(this["webpackJsonp03-tetris"]=this["webpackJsonp03-tetris"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t),r.d(t,"store",(function(){return re}));var n=r(0),a=r.n(n),c=r(5),s=r.n(c),i=(r(16),r(17),r(18),r(19),r(20),{1:"yellow",2:"lightBlue",3:"darkBlue",4:"orange",5:"red",6:"green",7:"purple",11:"yellow",12:"lightBlue",13:"darkBlue",14:"orange",15:"red",16:"green",17:"purple"}),o=r(2),l=r(1);var u=function(e){var t=Object(o.c)((function(e){return e.playArea})),r=Object(o.c)((function(e){return e.brick})),n=r.brick,a=r.baseLine,c=r.baseColumn,s=n.length;return Object(l.jsx)("div",{className:"PlayArea",children:function(){for(var e=[],r=function(){for(var e=[],r=0;r<24;r++)if(r<=a-s||r>a)e=e.concat(t[r]);else for(var i=0;i<10;i++)e=i<c||i>=c+s?e.concat(t[r][i]):e.concat(n[r-a+s-1][i-c]+t[r][i]);return e}(),o=40;o<240;o++)0===r[o]?e.push(Object(l.jsx)("div",{className:"PlayArea__cell"},"".concat(o))):e.push(Object(l.jsx)("div",{className:"PlayArea__cell_".concat(i[r[o]])},"".concat(o)));return e}()})},d=(r(28),function(e){var t=e.startGameFunc,r=e.stopGameFunc,n=Object(o.c)((function(e){return e.gameStatus}));return Object(l.jsx)("div",{className:"controls",children:Object(l.jsxs)("button",{className:"controls__button",onClick:"inProgress"===n?r:t,children:["inProgress"!==n&&Object(l.jsx)("svg",{version:"1.1",id:"\u0421\u043b\u043e\u0439_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 300 300",children:Object(l.jsx)("polygon",{className:"st0",points:"224.9,150 94.4,74.7 94.4,225.3 "})}),"inProgress"===n&&Object(l.jsxs)("svg",{version:"1.1",id:"\u0421\u043b\u043e\u0439_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 300 300",children:[Object(l.jsx)("rect",{x:"93.5",y:"84",className:"st0",width:"45",height:"132"}),Object(l.jsx)("rect",{x:"161.5",y:"84",className:"st0",width:"45",height:"132"})]})]})})});r(29);var p=function(){var e=Object(o.c)((function(e){return e.score})),t=e.score,r=e.record,n=e.scorePlus,a=e.recordPlus,c=e.scoreAnimation,s=e.recordAnimation,i=Object(o.c)((function(e){return e.level})),u=i.level,d=i.rows;return Object(l.jsxs)("div",{className:"Stat",children:[Object(l.jsx)("p",{className:"Stat__title",children:"SCORE:"}),Object(l.jsxs)("p",{className:"Stat__score",children:[Object(l.jsx)("span",{className:"Stat__score-value ".concat(c),children:t}),Object(l.jsx)("span",{className:"Stat__animate-plus ".concat(c),children:" + "}),Object(l.jsx)("span",{className:"Stat__animate ".concat(c),children:n})]}),Object(l.jsx)("p",{className:"Stat__title",children:"BEST:"}),Object(l.jsxs)("p",{className:"Stat__score",children:[Object(l.jsx)("span",{className:"Stat__score-value ".concat(s),children:r}),Object(l.jsx)("span",{className:"Stat__animate-plus ".concat(s),children:" + "}),Object(l.jsx)("span",{className:"Stat__animate ".concat(s),children:a})]}),Object(l.jsx)("p",{className:"Stat__title",children:"SPEED:"}),Object(l.jsx)("p",{className:"Stat__score",children:u}),Object(l.jsx)("p",{className:"Stat__title",children:"NEXT LEVEL:"}),Object(l.jsx)("div",{className:"Stat__next-level-container",children:Object(l.jsx)("div",{className:"Stat__next-level-progress",style:{width:"".concat(d%15/15*100,"%")}})})]})};r(30);var b=function(){var e=Object(o.c)((function(e){return e.nextBrick.brick}));return Object(l.jsxs)("div",{className:"Queue",children:[Object(l.jsx)("p",{className:"Queue__title",children:"NEXT:"}),Object(l.jsx)("div",{className:"Queue__item",children:function(){for(var t=[],r=function(){for(var t=[],r=0;r<4;r++)for(var n=0;n<4;n++)e[r]&&e[r][n]?t.push(e[r][n]):t.push(0);return t}(),n=0;n<16;n++)0===r[n]||void 0===r[n]?t.push(Object(l.jsx)("div",{className:"Queue__cell"},"".concat(n))):t.push(Object(l.jsx)("div",{className:"Queue__cell_".concat(i[r[n]])},"".concat(n)));return t}()})]})},f={0:[[1,1],[1,1]],1:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,2,2,2]],2:[[0,3,0],[0,3,0],[3,3,0]],3:[[4,0,0],[4,0,0],[4,4,0]],4:[[0,0,0],[5,5,0],[0,5,5]],5:[[0,0,0],[0,6,6],[6,6,0]],6:[[0,0,0],[7,7,7],[0,7,0]]};function v(e){var t=Math.random()*(e+1);return Math.floor(t)}function h(e){for(var t=e.length,r=[],n=0;n<t;n++){for(var a=[],c=0;c<t;c++)a.push(e[t-c-1][n]);a.every((function(e){return 0===e}))?r.unshift(a):r.push(a)}return r}function j(){for(var e=f[v(6)],t=0;t<v(3);t++)e=h(e);var r=e.length;return{brick:e,baseLine:3,baseColumn:Math.ceil((10-r)/2)}}var m="ADD_NEW_BRICK",_="ADD_NEW_BRICK_FROM_NEXT",y="REMOVE_BRICK",O="MOVE_DOWN",g="MOVE_LEFT",x="MOVE_RIGHT",S="ROTATE",N="GENERATE_NEXT_BRICK",w="MOUNT_BRICK",A="REMOVE_FULL_ROWS",E="CLEAR_AREA",k="UPDATE_SCORE",C="START_ANIMATION",L="CLEAR_SCORE",R="GAME_START",M="GAME_PAUSE",T="GAME_FINISH",P="COUNT_ROWS",B="CLEAR_LEVEL",I=function(){return{type:m,payload:j()}};function D(e,t,r,n,a){var c=r.length;if("down"===e&&n>=24)return!1;if("left"===e&&a<0)for(var s=0;s<c;s++)for(var i=0;i<-1*a;i++)if([1,2,3,4,5,6,7].includes(r[s][i]))return!1;if("right"===e&&a+c>10)for(var o=0;o<c;o++)for(var l=c-1;l>9-a;l--)if([1,2,3,4,5,6,7].includes(r[o][l]))return!1;for(var u=0;u<c;u++)for(var d=0;d<c;d++)if([1,2,3,4,5,6,7].includes(r[u][d])&&[11,12,13,14,15,16,17].includes(t[u+n-c+1][d+a]))return!1;return!0}var G=function(){return{type:N,payload:j()}},K=function(e,t,r){var n=t+e,a=r;return n>r&&(a=n,localStorage.setItem("record",a)),{type:k,payload:{score:n,record:a,scoreAnimation:"",recordAnimation:""}}},F=function(e,t){return{type:C,payload:{scorePlus:e,scoreAnimation:"active",recordPlus:t,recordAnimation:t>0?"active":""}}};function V(){var e=re.getState().playArea,t=re.getState().brick,r=re.getState().nextBrick,n=re.getState().score.score,a=re.getState().score.record,c=re.getState().level,s=e.filter((function(e){return e.every((function(e){return e>10}))})).length;if(!e.slice(0,4).some((function(e){return e.some((function(e){return 0!==e}))})))return 0===t.brick.length?(re.dispatch(I()),void re.dispatch(G())):void(s>0?(re.dispatch(function(e,t){var r=e.filter((function(e){return e.some((function(e){return e<=10}))}));return r=new Array(t).fill([0,0,0,0,0,0,0,0,0,0]).concat(r),{type:A,payload:r}}(e,s)),re.dispatch(function(e,t,r){var n=[0,5,10,20,40][e],a=+r-(t+n)>0?0:t+n-+r;return function(e){e(F(n,a)),setTimeout((function(){e(K(n,t,r))}),1e3)}}(s,n,a)),re.dispatch(function(e,t){var r=t.rows,n=t.level<10?1+Math.floor((r+e)/15):t.level,a=n!==t.level?800-Math.floor(650*Math.sin(Math.PI/2-Math.PI/18*(10-n))):t.speed;return{type:P,payload:{rows:r+e,level:n,speed:a}}}(s,c))):D("down",e,t.brick,t.baseLine+1,t.baseColumn)?re.dispatch(function(){var e=re.getState().brick;return{type:O,payload:{brick:e.brick,baseLine:e.baseLine+1,baseColumn:e.baseColumn}}}()):(re.dispatch(function(e,t){for(var r=t.brick,n=t.baseLine,a=t.baseColumn,c=r.length,s=[],i=0;i<24;i++)if(i<=n-c||i>n)s.push(e[i]);else{for(var o=[],l=0;l<10;l++)l<a||l>=a+c?o.push(e[i][l]):[1,2,3,4,5,6,7].includes(r[i-n+c-1][l-a])?o.push(r[i-n+c-1][l-a]+10):o.push(e[i][l]);s.push(o)}return{type:w,payload:s}}(e,t)),0===r.brick.length?(re.dispatch(I()),re.dispatch(G())):(re.dispatch(function(e){return{type:_,payload:e}}(r)),re.dispatch(G()))));re.dispatch({type:T})}function U(){var e=re.getState().gameStatus;if("paused"!==e){var t=re.getState().level.speed;V(),"inProgress"===e&&setTimeout(U,t)}}var W=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.gameStatus})),r=Object(n.useCallback)((function(t){"Numpad5"===t.code||"ArrowDown"===t.code||"KeyS"===t.code?(t.preventDefault(),V()):"Numpad4"===t.code||"ArrowLeft"===t.code||"KeyA"===t.code?(t.preventDefault(),e(function(){var e=re.getState().brick,t=D("left",re.getState().playArea,e.brick,e.baseLine,e.baseColumn-1)?-1:0;return{type:g,payload:{brick:e.brick,baseLine:e.baseLine,baseColumn:e.baseColumn+t}}}())):"Numpad6"===t.code||"ArrowRight"===t.code||"KeyD"===t.code?(t.preventDefault(),e(function(){var e=re.getState().brick,t=D("right",re.getState().playArea,e.brick,e.baseLine,e.baseColumn+1)?1:0;return{type:x,payload:{brick:e.brick,baseLine:e.baseLine,baseColumn:e.baseColumn+t}}}())):"Numpad8"!==t.code&&"ArrowUp"!==t.code&&"KeyW"!==t.code||(t.preventDefault(),e(function(){for(var e=re.getState().brick,t=e.brick,r=e.baseColumn,n=t.length,a=r<0?0:r>10-n?10-n:r,c=[],s=0;s<n;s++){for(var i=[],o=0;o<n;o++)i.push(t[n-o-1][s]);i.every((function(e){return 0===e}))?c.unshift(i):c.push(i)}return{type:S,payload:{brick:c,baseLine:e.baseLine,baseColumn:a}}}()))}),[]);return Object(l.jsxs)("main",{className:"Main",children:[Object(l.jsx)(u,{}),Object(l.jsxs)("div",{className:"Main__controls-panel",children:[Object(l.jsx)(b,{}),Object(l.jsx)(p,{}),Object(l.jsx)(d,{startGameFunc:function(){window.addEventListener("keydown",r),"paused"===t?e({type:R}):"finished"===t&&(e({type:E}),e({type:L}),e({type:B}),e({type:R})),U()},stopGameFunc:function(){window.removeEventListener("keydown",r),e({type:M})}})]})]})};var Q=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(W,{})})},X=r(3),H={brick:[],baseLine:0,baseColumn:0},J="paused",q={rows:0,level:1,speed:800},z={brick:[],baseLine:0,baseColumn:0},Y=new Array(24).fill([0,0,0,0,0,0,0,0,0,0]),Z=r(4),$={score:0,scoreAnimation:"",scorePlus:5,record:localStorage.getItem("record")?localStorage.getItem("record"):0,recordAnimation:"",recordPlus:5},ee=Object(X.c)({playArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.payload;case E:return Y;case A:return t.payload;default:return e}},brick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:case _:return t.payload;case y:return H;case O:case g:case x:case S:return t.payload;default:return e}},nextBrick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return t.payload;default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:case C:return Object(Z.a)(Object(Z.a)({},e),t.payload);case L:return $;default:return e}},gameStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return"inProgress";case M:return"paused";case T:return"finished";default:return e}},level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return t.payload;case B:return q;default:return e}}}),te=r(11),re=Object(X.d)(ee,Object(X.a)(te.a));s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(o.a,{store:re,children:Object(l.jsx)(Q,{})})}),document.getElementById("root"))}],[[31,1,2]]]);
//# sourceMappingURL=main.e5afd528.chunk.js.map