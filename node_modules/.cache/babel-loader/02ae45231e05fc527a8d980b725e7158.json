{"ast":null,"code":"import React, { useState, useEffect } from 'react'; // import addNewBlock from '../gameEvents/addNewBlock';\n\nimport DataTransform from './DataTransform';\nlet dataTransform = new DataTransform();\nexport default class MoveDown extends React.Component {\n  stopBlock(currentArea) {\n    let newArea = [];\n\n    for (let row = 0; row < 24; row++) {\n      if (!currentArea[row].includes(1)) {\n        newArea.push(currentArea[row]);\n      } else {\n        let newRow = [];\n        currentArea[row].map(el => {\n          if (el === 1) {\n            return el = 2;\n          }\n        });\n        console.log(currentArea[row]);\n        newArea.push(currentArea[row]);\n      }\n    }\n\n    console.log(newArea);\n    return newArea;\n  } // removeFullRows(area) {\n  //     let filteredArea = area.filter((row) => {\n  //         return row.some((el) => {\n  //             return el === 0\n  //         })\n  //     })\n  //     return area\n  // }\n\n\n  move(currentArea) {\n    let newArea = [];\n    let areaInArray = dataTransform.schemeToArr(currentArea);\n    let stoppedBlocks = areaInArray.map(el => {\n      return el === 2 ? el = 2 : el = 0;\n    });\n    let movingBlocks = areaInArray.map(el => {\n      return el === 1 ? el = 1 : el = 0;\n    });\n\n    for (let i = 0; i < 10; i++) {\n      const deleteLastElem = movingBlocks.pop();\n\n      if (deleteLastElem === 1) {\n        return this.stopBlock(currentArea);\n      }\n    }\n\n    for (let i = 0; i < 10; i++) {\n      movingBlocks.unshift(0);\n    }\n\n    for (let i = 0; i < 240; i++) {\n      const sum = stoppedBlocks[i] + movingBlocks[i];\n\n      if (sum < 2) {\n        newArea.push(sum);\n      } else {\n        return this.stopBlock(currentArea);\n      }\n    }\n\n    return dataTransform.arrToScheme(newArea);\n  }\n\n}","map":{"version":3,"sources":["D:/FrontEnd/03-tetris/src/blockMoves/MoveDown.js"],"names":["React","useState","useEffect","DataTransform","dataTransform","MoveDown","Component","stopBlock","currentArea","newArea","row","includes","push","newRow","map","el","console","log","move","areaInArray","schemeToArr","stoppedBlocks","movingBlocks","i","deleteLastElem","pop","unshift","sum","arrToScheme"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C,C,CACA;;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,IAAIC,aAAa,GAAG,IAAID,aAAJ,EAApB;AAEA,eAAe,MAAME,QAAN,SAAuBL,KAAK,CAACM,SAA7B,CAAuC;AAElDC,EAAAA,SAAS,CAACC,WAAD,EAAc;AACnB,QAAIC,OAAO,GAAG,EAAd;;AACA,SAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,EAAxB,EAA4BA,GAAG,EAA/B,EAAmC;AAC/B,UAAI,CAACF,WAAW,CAACE,GAAD,CAAX,CAAiBC,QAAjB,CAA0B,CAA1B,CAAL,EAAmC;AAC/BF,QAAAA,OAAO,CAACG,IAAR,CAAaJ,WAAW,CAACE,GAAD,CAAxB;AACH,OAFD,MAEO;AACH,YAAIG,MAAM,GAAG,EAAb;AACAL,QAAAA,WAAW,CAACE,GAAD,CAAX,CAAiBI,GAAjB,CAAsBC,EAAD,IAAQ;AACzB,cAAIA,EAAE,KAAK,CAAX,EAAc;AACV,mBAAOA,EAAE,GAAG,CAAZ;AACH;AACJ,SAJD;AAKAC,QAAAA,OAAO,CAACC,GAAR,CAAYT,WAAW,CAACE,GAAD,CAAvB;AACAD,QAAAA,OAAO,CAACG,IAAR,CAAaJ,WAAW,CAACE,GAAD,CAAxB;AACH;AACJ;;AACDM,IAAAA,OAAO,CAACC,GAAR,CAAYR,OAAZ;AACA,WAAOA,OAAP;AACH,GApBiD,CAsBlD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAS,EAAAA,IAAI,CAACV,WAAD,EAAc;AACd,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIU,WAAW,GAAGf,aAAa,CAACgB,WAAd,CAA0BZ,WAA1B,CAAlB;AACA,QAAIa,aAAa,GAAGF,WAAW,CAACL,GAAZ,CAAiBC,EAAD,IAAQ;AACxC,aAAOA,EAAE,KAAK,CAAP,GAAWA,EAAE,GAAG,CAAhB,GAAoBA,EAAE,GAAG,CAAhC;AACH,KAFmB,CAApB;AAGA,QAAIO,YAAY,GAAGH,WAAW,CAACL,GAAZ,CAAiBC,EAAD,IAAQ;AACvC,aAAOA,EAAE,KAAK,CAAP,GAAWA,EAAE,GAAG,CAAhB,GAAoBA,EAAE,GAAG,CAAhC;AACH,KAFkB,CAAnB;;AAGA,SAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,YAAMC,cAAc,GAAGF,YAAY,CAACG,GAAb,EAAvB;;AACA,UAAID,cAAc,KAAK,CAAvB,EAA0B;AACtB,eAAO,KAAKjB,SAAL,CAAeC,WAAf,CAAP;AACH;AACJ;;AACD,SAAM,IAAIe,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,EAArB,EAAyBA,CAAC,EAA1B,EAA8B;AAC1BD,MAAAA,YAAY,CAACI,OAAb,CAAqB,CAArB;AACH;;AACD,SAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,EAA1B,EAA8B;AAC1B,YAAMI,GAAG,GAAGN,aAAa,CAACE,CAAD,CAAb,GAAmBD,YAAY,CAACC,CAAD,CAA3C;;AACA,UAAII,GAAG,GAAG,CAAV,EAAa;AACTlB,QAAAA,OAAO,CAACG,IAAR,CAAae,GAAb;AACH,OAFD,MAEO;AACH,eAAO,KAAKpB,SAAL,CAAeC,WAAf,CAAP;AACH;AACJ;;AACD,WAAOJ,aAAa,CAACwB,WAAd,CAA0BnB,OAA1B,CAAP;AACH;;AA1DiD","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n// import addNewBlock from '../gameEvents/addNewBlock';\r\nimport DataTransform from './DataTransform'\r\nlet dataTransform = new DataTransform()\r\n\r\nexport default class MoveDown extends React.Component {\r\n\r\n    stopBlock(currentArea) {\r\n        let newArea = []\r\n        for (let row = 0; row < 24; row++) {\r\n            if (!currentArea[row].includes(1)) {\r\n                newArea.push(currentArea[row])\r\n            } else {\r\n                let newRow = []\r\n                currentArea[row].map((el) => {\r\n                    if (el === 1) {\r\n                        return el = 2\r\n                    }\r\n                })\r\n                console.log(currentArea[row])\r\n                newArea.push(currentArea[row])\r\n            }\r\n        }\r\n        console.log(newArea)\r\n        return newArea\r\n    }\r\n\r\n    // removeFullRows(area) {\r\n    //     let filteredArea = area.filter((row) => {\r\n    //         return row.some((el) => {\r\n    //             return el === 0\r\n    //         })\r\n    //     })\r\n    //     return area\r\n    // }\r\n\r\n    move(currentArea) {\r\n        let newArea = []\r\n        let areaInArray = dataTransform.schemeToArr(currentArea)\r\n        let stoppedBlocks = areaInArray.map((el) => {\r\n            return el === 2 ? el = 2 : el = 0\r\n        })\r\n        let movingBlocks = areaInArray.map((el) => {\r\n            return el === 1 ? el = 1 : el = 0\r\n        })\r\n        for (let i = 0; i < 10; i++) {\r\n            const deleteLastElem = movingBlocks.pop()\r\n            if (deleteLastElem === 1) {\r\n                return this.stopBlock(currentArea)\r\n            }\r\n        }\r\n        for ( let i = 0; i < 10; i++) {\r\n            movingBlocks.unshift(0)\r\n        }\r\n        for (let i = 0; i < 240; i++) {\r\n            const sum = stoppedBlocks[i] + movingBlocks[i]\r\n            if (sum < 2) {\r\n                newArea.push(sum)\r\n            } else {\r\n                return this.stopBlock(currentArea)\r\n            }\r\n        }\r\n        return dataTransform.arrToScheme(newArea)\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}